<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>邱县干部日常考核平台</title>    <meta name="viewport"          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">    <link rel="stylesheet" href="css/reset.css">    <link rel="stylesheet" href="css/swiper-4.3.3.min.css">    <link rel="stylesheet" href="css/public.css">    <link rel="stylesheet" href="css/select1.css"></head><body><div class="headerPage"></div><div class="column-title clear">    <span class="left">监督评议 | supervision</span></div><div class="form">    <div class="selectGroup">        <!--<div class="list">            <p>政治素质：</p>            <select name="">                <option value="">高</option>                <option value="">较高</option>                <option value="">一般</option>                <option value="">较差</option>            </select>            <textarea name="" id="" cols="30" rows="10" placeholder="具体情况"></textarea>        </div>-->    </div></div><div class="tips">*注：提交（每个物理地址每季度只允许评价一次，评价结果只有管理员可看，选择选择存在、严重、较差的请列举情况。）</div><button class="submit">确 认</button><script src="js/rem.js"></script><script src="js/swiper-4.3.3.min.js"></script><script src="js/jquery-3.3.1.min.js"></script><script src="js/public.js"></script><script>    //获取人员    $.ajax({        type: "POST",        dataType: "json",        url: GLOBEL_URl,        data: {            oper: 'getMemberList',            type: 2,            companyid: $.Request('id'),            pageSize: 50,            pageIndex: 1        },        success: function (data) {            var peopleList = data.data;            // 获取选项            $.ajax({                type: "POST",                dataType: "json",                url: GLOBEL_URl,                data: {                    oper: 'getSupervisionList',                    id: '92307582-B8CC-4186-BD9C-E96DA5FB7B06'                },                success: function (data) {                    var selectData = data.data[0];                    var form = document.getElementsByClassName('form')[0];                    form.innerHTML = ''                    for (var i = 0; i < peopleList.length; i++) {                        var list = document.createElement('div');                        list.className = 'list';                        var p = document.createElement('p');                        p.innerHTML = peopleList[i].RealName + '：';                        var select = document.createElement('select');                        select.setAttribute('memberid', peopleList[i].MemberId)                        select.setAttribute('membername', peopleList[i].RealName)                        select.setAttribute('TestBankId', selectData.TestBankId)                        select.setAttribute('TestContent', selectData.TestContent)                        var op = document.createElement('option');                        op.innerHTML = '请选择';                        op.value = '';                        select.appendChild(op)                        for (var j = 0; j < selectData.OptionContent.length; j++) {                            var option = document.createElement('option');                            option.innerHTML = selectData.OptionContent[j].c;                            option.value = selectData.OptionContent[j].c;                            select.appendChild(option)                        }                        list.appendChild(p)                        list.appendChild(select)                        form.appendChild(list);                    }                }            })        }    })    $('.submit').click(function () {        var list = document.getElementsByTagName('select');        /*for (var i = 0; i < selectData.length; i++) {            for (var j = 0; j < selectData[i].OptionContent.length; j++) {                selectData[i].OptionContent[j].e = ''                selectData[i].OptionContent[j].v = 'false'            }        }*/        for (var i = 0; i < list.length; i++) {            if ($(list[i]).children('option:selected').val() != '') {                for (var j = 0; j < selectData.length; j++) {                    if (list[i].getAttribute('data-id') == selectData[j].TestBankId) {                        for (var k = 0; k < selectData[j].OptionContent.length; k++) {                            if (selectData[j].OptionContent[k].c == $(list[i]).children('option:selected').val()) {                                selectData[j].OptionContent[k].v = 'true';                                if ($(list[i]).next().hasClass('none')) {                                } else {                                    if ($(list[i]).next().val() != '') {                                        selectData[j].OptionContent[k].e = $(list[i]).next().val()                                    } else {                                        alert('请填写完整内容')                                        return                                    }                                }                            }                        }                    }                }            } else {                alert('请填写完整内容')                return            }        }        console.log(JSON.stringify(selectData))        $.ajax({            type: "POST",            dataType: "json",            url: GLOBEL_URl,            data: {                oper: 'addSupervision',                type: 4,                memberid: '',                companyid: $.Request('id'),                content: JSON.stringify(selectData),                other: '',                openid: 'oXQlD5uqC92zyzRlThaOl_o5Y3m0'            },            success: function (data) {                alert(data.msg)                location.reload()            }        })    })</script></body></html>